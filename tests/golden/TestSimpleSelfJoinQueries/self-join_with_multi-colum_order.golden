`
Query:

SELECT * FROM employees e
JOIN employees m ON m.employee_id = e.manager_id
ORDER BY m.last_name, e.last_name

Plan:

select (employee_id, first_name, last_name, email, manager_id, department_id, employee_id, first_name, last_name, email, manager_id, department_id)
    order by m.last_name, e.last_name
        join using nested loop
            alias as e
                btree index scan of employees via employees_last_name_first_name_employee_id
        with
            alias as m
                table scan of employees
                    filter: employees.employee_id = e.manager_id
        on m.employee_id = e.manager_id

Results:

 employee_id | first_name | last_name |              email             | manager_id | department_id | employee_id | first_name | last_name |            email           | manager_id | department_id
-------------+------------+-----------+--------------------------------+------------+---------------+-------------+------------+-----------+----------------------------+------------+---------------
          11 |    Deborah |   Glasser |    deborah.glasser@company.com |          9 |             1 |           9 |      Jimmy |  Barnette | jimmy.barnette@company.com |          1 |             3
          10 |       Emma |    Howard |        emma.howard@company.com |          9 |             3 |           9 |      Jimmy |  Barnette | jimmy.barnette@company.com |          1 |             3
           9 |      Jimmy |  Barnette |     jimmy.barnette@company.com |          1 |             3 |           1 |   Annalisa |      Head |  annalisa.head@company.com |          1 |             1
           7 |      Linda |    Dollar |       linda.dollar@company.com |          1 |             1 |           1 |   Annalisa |      Head |  annalisa.head@company.com |          1 |             1
           1 |   Annalisa |      Head |      annalisa.head@company.com |          1 |             1 |           1 |   Annalisa |      Head |  annalisa.head@company.com |          1 |             1
           5 |     Robert |    Medina |      robert.medina@company.com |          1 |             1 |           1 |   Annalisa |      Head |  annalisa.head@company.com |          1 |             1
           3 |     Manuel |  Pattison |    manuel.pattison@company.com |          1 |             3 |           1 |   Annalisa |      Head |  annalisa.head@company.com |          1 |             1
           4 |      Maria |    Warren |       maria.warren@company.com |          1 |             1 |           1 |   Annalisa |      Head |  annalisa.head@company.com |          1 |             1
           6 |    Timothy |   Cornish |    timothy.cornish@company.com |          4 |             2 |           4 |      Maria |    Warren |   maria.warren@company.com |          1 |             1
           2 |    Clayton |  Mahaffey |   clayton.mahaffey@company.com |          4 |             2 |           4 |      Maria |    Warren |   maria.warren@company.com |          1 |             1
           8 |  Frederick |  McLendon | frederick.mclendon@company.com |          4 |             2 |           4 |      Maria |    Warren |   maria.warren@company.com |          1 |             1
(11 rows)
`
